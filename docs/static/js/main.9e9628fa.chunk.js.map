{"version":3,"sources":["logic/Hooks.js","logic/DataLogic.js","components/js/DataControls.js","components/js/Mapbox.js","logic/GraphLogic.js","components/js/HierarchicalGraph.js","components/js/AreaGraph.js","components/js/AppFrame.js","components/js/LoadScreen.js","logic/Reducers.js","serviceWorker.js","index.js","App.js"],"names":["useHoveredCP","hoveredCP","_useState5","useState","_useState6","Object","slicedToArray","lastMarker","setLastMarker","useEffect","d3","concat","transition","duration","attr","markerElement","datum","data","CP","marker","_element","children","addMarker","mapbox","bounds","setDisplay","pos","mapboxgl","LngLat","lng","lat","popup","Popup","setHTML","road_name","displayName","_content","querySelector","addEventListener","type","payload","id","Marker","setLngLat","setPopup","addTo","markers","push","getElement","select","append","on","extend","parseData","fetchResult","forEach","count_point_id","CountPoint","road_type","latitude","longitude","region_id","authority_id","local_authority_id","link_length","link_length_km","start_junction","start_junction_road_name","end_junction","end_junction_road_name","vehicleCounts","sum_vehicles","all_motor_vehicles","pedal_cycles","sum_goods","all_hgvs","lgvs","sum_hgvs","sum_bus_coach","buses_and_coaches","sum_cars_taxis","cars_and_taxis","sum_lgvs","sum_hgv_2_rigid","hgvs_2_rigid_axle","sum_hgv_3_artic","hgvs_3_or_4_articulated_axle","sum_hgv_3_rigid","hgvs_3_rigid_axle","sum_hgv_4_rigid","hgvs_4_or_more_rigid_axle","sum_hgv_5_artic","hgvs_5_articulated_axle","sum_hgv_6_artic","hgvs_6_articulated_axle","sum_push","sum_motorbike","two_wheeled_motor_vehicles","count","counts","year","Count","estimation_method","direction_of_travel","addDirection","values","filterData","CPs","filters","filter","matchesFilters","filterCounts","reduce","acc","addCounts","direction","vehicles","getCounts","VehicleCounts","sortAlphaNum","a","b","toString","reA","reN","aA","replace","bA","aN","parseInt","bN","_ref","classCallCheck","this","_this","keys","length","entries","hasOwnProperty","every","_ref2","_ref3","value","distance","d2r","d","Math","PI","phi_a","phi_b","del_phi","del_lambda","A","pow","sin","cos","atan2","sqrt","latLngDistance","center","radius","parent","method","isEstimated","VehicleCount","name","arguments","undefined","subcounts","val","objectSpread","child","flatten","_this2","structure","_ref4","_ref5","key","createClass","_ref6","_ref7","defineProperty","total","_ref8","_ref9","addValue","get","each","node","hierarchy","FilterHolder","react_default","createElement","className","viewBox","style","transform","CPFilters","map","display","getCPOptions","Array","from","Set","sort","DataControls_FilterHolder","DataControls_FilterDropdown","title","options","DataControls_GeocoderFilter","x1","x2","y1","y2","strokeWidth","strokeDasharray","href","opacity","x","y","width","height","CountFilters","_ref3$showDate","showDate","_ref3$showDirection","showDirection","date","useCallback","v","i","FilterDropdown","icon","active","setVal","onClick","onChange","ev","target","option","GeocoderFilter","searchBox","useRef","radiusRef","geoCoder","accessToken","_useState3","_useState4","setGeoCoder","gc","MapboxGeocoder","clearAndBlurOnEsc","current","appendChild","onAdd","result","useGeocoder","clear","ref","text","Mapbox","filteredData","_useState","_useState2","mapMarkers","setMapMarkers","Map","mapRef","setMapbox","container","addControl","NavigationControl","useMapbox","LngLatBounds","includes","remove","_ne","fitBounds","padding","left","top","bottom","right","useMap","DataControls_CPFilters","t_fadeIn","selection","t_fadeOut","onMouseMove","call","onMouseOut","triggerEvent","event","label","apply","colours","drawLegend","frame","seriesLabels","t_slideIn","onContext","selectAll","join","enter","grp","colour","drawAxes","hoverable","tickSize","tickPadding","tickSizeOuter","tickFormat","domain","calculateStacks","subgroups","stack","offset","stackedData","find","range","drawStackedBars","graph","route","barLabels","graphData","lastIndex","goUp","preventDefault","_calculateStacks","max","toConsumableArray","nice","parentBounds","update","exit","tmpmax","series","tmp_y","bandwidth","group","reverse","drawAreaStacks","xLabels","_calculateStacks2","clamp","x0","round","invert","curve","y0","HierarchicalGraph","overloadWarn","setOverloadWarn","useMemo","view","graphNode","descendants","descendant","indexOf","preserveAspectRatio","fill","AreaGraph","years","sumData","AppSidebar","AppFrame","helpText","maximised","setMaximised","showHelp","setShowHelp","AppFrame_MaximiseButton","AppFrame_HelpButton","MaximiseButton","blend","setBlend","path","bind","useGesture","onHover","hovering","onDragStart","pathInterp","assign","renderprops","t","to","config","tension","friction","HelpButton","_useState7","_useState8","LoadScreen","loading","props","useSpring","delay","carRef","car","wheelRotation","ease","carBob","smoke","random","bushSlide","react_spring_web","div","r","stroke","displayReducer","state","action","updateState","newState","Error","Boolean","window","location","hostname","match","ReactDOM","render","setData","setLoading","_useReducer","useReducer","_useReducer2","then","newData","memoMap","js_Mapbox","loadScreen","LoadScreen_LoadScreen","AppFrame_AppSidebar","AppFrame_AppFrame","DataControls_CountFilters","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9e9628fa.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\r\nimport * as d3 from 'd3';\r\n\r\nconst useMapbox = ({ accessToken, mapRef }) => {\r\n\r\n    const [ mapbox, setMapbox ] = useState( null );\r\n\r\n    useEffect( () => {\r\n\r\n        if( !mapRef.current ) return;\r\n\r\n        mapboxgl.accessToken = accessToken;\r\n\r\n        const map = new mapboxgl.Map({\r\n            container: mapRef.current,\r\n            style: 'mapbox://styles/jridley246/cjxi67z0i42vy1cldfj812u8x',\r\n        })\r\n\r\n        setMapbox( map )\r\n\r\n        map.addControl( new mapboxgl.NavigationControl(), 'bottom-left' );\r\n        map.markers = [];\r\n\r\n    }, [accessToken, mapRef])\r\n\r\n    return mapbox\r\n\r\n}\r\n\r\nconst useMap = ( mapbox, mapMarkers, display, setDisplay ) => {\r\n\r\n    useEffect( () => {\r\n\r\n        if( !mapbox || !mapMarkers ) return\r\n\r\n        const bounds = new mapboxgl.LngLatBounds();\r\n\r\n        //Remove old markers\r\n        mapbox.markers.filter( marker => !mapMarkers.includes( marker.data ) ).forEach( marker => { marker.data.marker = null; marker.remove() } );\r\n        mapbox.markers = mapbox.markers.filter( marker => mapMarkers.includes( marker.data ) );\r\n\r\n        //Add new markers\r\n        mapMarkers.forEach( CP => !CP.marker && addMarker( CP, mapbox, bounds, setDisplay ) );\r\n        //Fit map to markers\r\n        bounds._ne && mapbox.fitBounds( bounds, {\r\n            padding: { left: 50, top: 50, bottom: 50, right: 400 },\r\n            duration: 1000\r\n        });\r\n\r\n    }, [mapbox, mapMarkers, setDisplay])\r\n\r\n}\r\n\r\nconst useGeocoder = ( map, searchBox, accessToken, setDisplay, radiusRef ) => {\r\n\r\n    const [ geoCoder, setGeoCoder ] = useState( null );\r\n\r\n    useEffect( () => {\r\n\r\n        if( !searchBox || !map ) return;\r\n\r\n        const gc = new MapboxGeocoder({\r\n            accessToken: accessToken,\r\n            mapboxgl: mapboxgl,\r\n            clearAndBlurOnEsc: false\r\n        });\r\n\r\n        searchBox.current.appendChild( gc.onAdd( map ) );\r\n        setGeoCoder( gc );\r\n\r\n        gc.on( \"result\", ev => setDisplay( { type: 'addFilter', payload: [ \"distance\", { ...ev.result, radius: radiusRef.current.value } ] } ));\r\n        gc.on( \"clear\", ev => setDisplay( { type: 'removeFilter', payload: \"distance\" } ) );\r\n\r\n\r\n    }, [map, searchBox, radiusRef, accessToken, setDisplay])\r\n\r\n    return geoCoder\r\n\r\n}\r\n\r\nconst useHoveredCP = hoveredCP => {\r\n\r\n    const [ lastMarker, setLastMarker ] = useState( null );\r\n\r\n    useEffect( () => {\r\n\r\n        if( hoveredCP ){\r\n\r\n            d3.selectAll( `.StackedBar > .Data > g > rect:not([class=\"${hoveredCP}\"])` )\r\n                .transition( \"fadehovered\" )\r\n                .duration( 100 )\r\n                .attr( \"opacity\", 0.2 )\r\n\r\n            const markerElement = d3.selectAll( `.StackedBar > .Data > g > rect[class=\"${hoveredCP}\"]` ).datum().data.data.CP.marker._element.children[0];\r\n            setLastMarker( markerElement );\r\n\r\n            d3.select( markerElement )\r\n                .transition()\r\n                .duration( 200 )\r\n                .attr( \"transform\", \"translate( 0, -8.75 )scale( 1.5 )\" )\r\n\r\n        } else{\r\n\r\n            d3.selectAll( `.StackedBar > .Data > g > rect` )\r\n                .transition( \"fadehovered\" )\r\n                .duration( 50 )\r\n                .attr( \"opacity\", 1 )\r\n\r\n            d3.select( lastMarker )\r\n                .transition()\r\n                .attr( \"transform\", \"translate( 0, 0 )scale( 1 )\" )\r\n\r\n        }\r\n\r\n\r\n    }, [ hoveredCP ])\r\n\r\n}\r\n\r\nexport { useMap, useMapbox, useGeocoder, useHoveredCP };\r\n\r\nconst addMarker = ( CP, mapbox, bounds, setDisplay ) => {\r\n\r\n    const highlightCP = function(){\r\n\r\n        setDisplay( { type: 'setHoveredCP', payload: CP.id } );\r\n\r\n\r\n    };\r\n    const unhighlightCP = function(){\r\n\r\n        setDisplay( 'clearHoveredCP' );\r\n\r\n    };\r\n\r\n    const pos = new mapboxgl.LngLat( CP.lng, CP.lat );\r\n\r\n    const popup = new mapboxgl.Popup()\r\n        .setHTML(`\r\n                <div class=\"MapPopup\">\r\n                    <h1>${CP.road_name}</h1>\r\n                    <h2>${CP.displayName}</h2>\r\n                    <button id=\"focus\">\r\n                        Set Focus\r\n                    </button>\r\n                </div>\r\n            `)\r\n\r\n    popup._content.querySelector( \"#focus\" ).addEventListener( \"click\", () => setDisplay( { type: 'setFilter', payload: { id: CP.id } } ) );\r\n\r\n    const marker = new mapboxgl.Marker()\r\n        .setLngLat( pos )\r\n        .setPopup( popup )\r\n        .addTo( mapbox )\r\n\r\n    marker.data = CP;\r\n    CP.marker = marker;\r\n    mapbox.markers.push( marker );\r\n\r\n    //Add rect for input capture...default marker svg is messy for event handling\r\n    d3.select( marker.getElement() ).select( \"svg\" )\r\n        .append( \"rect\" )\r\n        .attr( \"x\", 0 )\r\n        .attr( \"y\", 0 )\r\n        .attr( \"width\", \"100%\", )\r\n        .attr( \"height\", \"100%\" )\r\n        .attr( \"fill\", \"#0000\" )\r\n        .on( \"mouseenter\", highlightCP )\r\n        .on( \"mouseout\", unhighlightCP )\r\n\r\n    bounds.extend( pos );\r\n\r\n}\r\n","import * as d3 from 'd3';\r\n\r\n//data structure:\r\n//[\r\n//    CountPoint: [\r\n//        Count:\r\n//            VehicleCounts: [\r\n//                VehicleCount,\r\n//                VehicleCount,\r\n//                ...\r\n//            ],\r\n//        Count:\r\n//            VehicleCounts: [...],\r\n//        ...\r\n//    ],\r\n//    CountPoint: ...\r\n//]\r\n\r\n\r\nexport const parseData = fetchResult => {\r\n\r\n    let data = {};\r\n\r\n    fetchResult.forEach( datum => {\r\n\r\n        if( !data[datum.count_point_id] ){\r\n            data[datum.count_point_id] = new CountPoint({\r\n                road_name: datum.road_name,\r\n                id: datum.count_point_id,\r\n                road_type: datum.road_type,\r\n                lat: +datum.latitude,\r\n                lng: +datum.longitude,\r\n                region_id: datum.region_id,\r\n                authority_id: datum.local_authority_id,\r\n                link_length: datum.link_length_km,\r\n                start_junction: datum.start_junction_road_name,\r\n                end_junction: datum.end_junction_road_name\r\n            })\r\n        }\r\n\r\n        const vehicleCounts = {\r\n            sum_vehicles: +datum.all_motor_vehicles + +datum.pedal_cycles,\r\n            sum_goods: +datum.all_hgvs + +datum.lgvs,\r\n            sum_hgvs: datum.all_hgvs,\r\n            sum_bus_coach: datum.buses_and_coaches,\r\n            sum_cars_taxis: datum.cars_and_taxis,\r\n            sum_lgvs: datum.lgvs,\r\n            sum_hgv_2_rigid: datum.hgvs_2_rigid_axle,\r\n            sum_hgv_3_artic: datum.hgvs_3_or_4_articulated_axle,\r\n            sum_hgv_3_rigid: datum.hgvs_3_rigid_axle,\r\n            sum_hgv_4_rigid: datum.hgvs_4_or_more_rigid_axle,\r\n            sum_hgv_5_artic: datum.hgvs_5_articulated_axle,\r\n            sum_hgv_6_artic: datum.hgvs_6_articulated_axle,\r\n            sum_push: datum.pedal_cycles,\r\n            sum_motorbike: datum.two_wheeled_motor_vehicles,\r\n        };\r\n\r\n        const count = data[datum.count_point_id].counts[datum.year] || new Count(\r\n            data[datum.count_point_id],\r\n            datum.year,\r\n            datum.estimation_method,\r\n            datum.direction_of_travel,\r\n        )\r\n\r\n        data[datum.count_point_id].counts[datum.year] = count;\r\n\r\n        count.addDirection( datum.direction_of_travel, vehicleCounts );\r\n\r\n    })\r\n\r\n    data = Object.values( data );\r\n    return data\r\n\r\n}\r\n\r\nexport const filterData = ( CPs, filters ) => CPs.filter( CP => CP.matchesFilters( filters ) );\r\n\r\nexport const filterCounts = ( CP, filters ) => {\r\n\r\n    let counts = Object.values( CP.counts );\r\n\r\n    if( filters.year ) counts = counts.filter( count => count.year === filters.year );\r\n\r\n    return counts.reduce( ( acc, year ) => acc.addCounts( filters.direction || \"Total\", year.vehicles.getCounts( filters.direction ) ), new VehicleCounts( CP ) )\r\n\r\n}\r\n\r\nexport const sortAlphaNum = ( a, b ) => {\r\n\r\n    a = a.toString();\r\n    b = b.toString();\r\n\r\n    const reA = /[^a-zA-Z]/g;\r\n    const reN = /[^0-9]/g;\r\n    const aA = a.replace( reA, \"\" );\r\n    const bA = b.replace( reA, \"\" );\r\n\r\n    if (aA === bA) {\r\n\r\n        const aN = parseInt( a.replace( reN, \"\" ), 10 );\r\n        const bN = parseInt( b.replace( reN, \"\" ), 10 );\r\n\r\n        return aN === bN ? 0 : aN > bN ? 1 : -1;\r\n\r\n    } else {\r\n\r\n        return aA > bA ? 1 : -1;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const latLngDistance = ( a, b ) => {\r\n\r\n    const d2r = d => d*Math.PI/180;\r\n    const R = 6371e3; //Earth's radius\r\n    const phi_a = d2r( a[1] );\r\n    const phi_b = d2r( b[1] );\r\n    const del_phi = d2r( b[1] - a[1] );\r\n    const del_lambda = d2r( b[0] - a[0] );\r\n\r\n    const A = Math.pow( Math.sin( del_phi / 2 ), 2 ) + Math.cos( phi_a )*Math.cos( phi_b )*Math.pow( Math.sin( del_lambda / 2 ), 2 );\r\n    const C = 2 * Math.atan2( Math.sqrt(A), Math.sqrt( 1 - A ) );\r\n\r\n    return R * C\r\n\r\n}\r\n\r\nclass CountPoint{\r\n\r\n    constructor({ road_name, id, road_type, lat, lng, region_id, authority_id, link_length, start_junction, end_junction }){\r\n\r\n        this.road_name = road_name;\r\n        this.id = id.toString();\r\n        this.road_type = road_type;\r\n        this.lat = lat;\r\n        this.lng = lng;\r\n        this.region_id = region_id.toString();\r\n        this.authority_id = authority_id.toString();\r\n        this.link_length = link_length;\r\n        this.start_junction = start_junction;\r\n        this.end_junction = end_junction;\r\n        this.displayName = start_junction ? end_junction + \"_\" + start_junction : this.id;\r\n        this.counts = {};\r\n\r\n    }\r\n\r\n    matchesFilters( filters ){\r\n        return (\r\n            ( Object.keys( filters ).length > 0 ? Object.entries( filters ).filter( filter => this.hasOwnProperty( filter[0] ) ).every( ([filter, value]) => this[filter] === value ) : true ) &&\r\n            ( filters.distance ? latLngDistance( filters.distance.center, [this.lng, this.lat] ) < filters.distance.radius*1000 : true )\r\n        )\r\n    }\r\n\r\n}\r\n\r\nclass Count{\r\n\r\n    constructor( parent, year, method ){\r\n\r\n        this.parent = parent;\r\n        this.year = year.toString();\r\n        this.isEstimated = method === \"Estimated\";\r\n        this.vehicles = new VehicleCounts( this );\r\n\r\n    }\r\n\r\n    addDirection( direction, counts ){\r\n\r\n        this.vehicles.addCounts( direction, counts );\r\n        return this\r\n\r\n    }\r\n\r\n}\r\n\r\nclass VehicleCount{\r\n\r\n    constructor( name, parent, children = {} ){\r\n\r\n        this.name = name;\r\n        this.values = {};\r\n        this.subcounts = children;\r\n        this.CP = parent;\r\n\r\n    }\r\n\r\n    addValue( name, val ){\r\n\r\n        this.values[name] = this.values[name] ? this.values[name] + val : val;\r\n        return this\r\n\r\n    }\r\n\r\n    get children(){\r\n        return Object.values( this.subcounts )\r\n    }\r\n\r\n    get total(){\r\n        return Object.values( this.values ).reduce( ( acc, val ) => acc + val, 0 )\r\n    }\r\n\r\n    flatten(){\r\n        return { ...this.subcounts, ...this.children.reduce( ( acc, child ) => ({ ...acc, ...child.flatten() }), {} ) }\r\n    }\r\n\r\n}\r\n\r\nexport class VehicleCounts{\r\n\r\n    constructor( CP ){\r\n\r\n        const structure = new VehicleCount( \"Total Vehicles\", CP, {\r\n            sum_goods: new VehicleCount( \"Goods\", CP, {\r\n                sum_hgvs: new VehicleCount( \"HGVs\", CP, {\r\n                    sum_hgv_6_artic: new VehicleCount( \"Six-axle Artic\", CP ),\r\n                    sum_hgv_5_artic: new VehicleCount( \"Five-axle Artic\", CP ),\r\n                    sum_hgv_4_rigid: new VehicleCount( \"Four-axle Rigid\", CP ),\r\n                    sum_hgv_3_rigid: new VehicleCount( \"Three-axle Rigid\", CP ),\r\n                    sum_hgv_3_artic: new VehicleCount( \"Three-axle Artic\", CP ),\r\n                    sum_hgv_2_rigid: new VehicleCount( \"Two-axle Rigid\", CP ),\r\n                }),\r\n                sum_lgvs: new VehicleCount( \"LGVs\", CP )\r\n            }),\r\n            sum_push: new VehicleCount( \"Pedal Cycles\", CP ),\r\n            sum_motorbike: new VehicleCount( \"Motorbikes\", CP ),\r\n            sum_bus_coach: new VehicleCount( \"Buses and Coaches\", CP ),\r\n            sum_cars_taxis: new VehicleCount( \"Cars and Taxis\", CP ),\r\n        })\r\n\r\n        Object.entries( { \"sum_vehicles\": structure, ...structure.flatten() } ).forEach( ([key, count]) => this[key] = count );\r\n\r\n    }\r\n\r\n    getCounts( filter ){\r\n        return Object.entries( this ).reduce( ( acc, [key, count] ) => ({ ...acc, [key]: filter ? ( count.values[filter] || 0 ) : count.total }), {} )\r\n    }\r\n\r\n    addCounts( name, vehicleCounts ){\r\n        Object.entries( this ).forEach( ([key, count]) => vehicleCounts[key] && count.addValue( name, +vehicleCounts[key] ) );\r\n        return this\r\n    }\r\n\r\n    get hierarchy(){\r\n        return d3.hierarchy( this.sum_vehicles )\r\n            .each( node => node.data.hierarchy = node )\r\n    }\r\n\r\n}\r\n","import React, { useCallback, useRef } from 'react';\r\nimport { sortAlphaNum } from '../../logic/DataLogic.js';\r\nimport { useGeocoder } from '../../logic/Hooks.js';\r\nimport '../css/DataControls.scss';\r\n\r\nconst FilterHolder = ({children, id}) => {\r\n\r\n    return (\r\n        <div className=\"component-filterHolder\" id={id}>\r\n            <div>\r\n                <svg viewBox=\"0 0 100 100\">\r\n                    <g style={{transform: \"translate(50%,50%)\"}}>\r\n                        <path d=\"M -7 -10 l -30 -30 h 74 l -30 30 l -5 45 l -6 5 Z\"/>\r\n                    </g>\r\n                </svg>\r\n                <h1>Filters</h1>\r\n            </div>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const CPFilters = ({data, map, display, setDisplay}) => {\r\n\r\n    const getCPOptions = key => data ? Array.from( new Set( data.map( CP => CP[key] ) ) ).sort( sortAlphaNum ) : [\"NO DATA\"];\r\n\r\n    return(\r\n        <FilterHolder id=\"countPointFilters\">\r\n            <FilterDropdown title=\"Count Point\" id=\"id\" options={getCPOptions( \"id\" )} filters={display.filters} setDisplay={setDisplay}>\r\n                <path id=\"icon_marker\" d=\"M -25 0 a 30 30 0 1 1 50 0 l -25 40 l -25 -40 M -12.5 -15 a 12.5 12.5 0 0 0 25 0 a 12.5 12.5 0 0 0 -25 0\"/>\r\n            </FilterDropdown>\r\n            <GeocoderFilter filters={display.filters} map={map} setDisplay={setDisplay}>\r\n                <path id=\"icon_marker\" d=\"M -25 0 a 30 30 0 1 1 50 0 l -25 40 l -25 -40 M -12.5 -15 a 12.5 12.5 0 0 0 25 0 a 12.5 12.5 0 0 0 -25 0\" transform=\"translate(-15)\"/>\r\n                <line x1=\"-15\" x2=\"25\" y1=\"40\" y2=\"10\" strokeWidth=\"5\" strokeDasharray=\"6\"/>\r\n                <use href=\"#icon_marker\" transform=\"translate(25,-10)scale(0.6)\" opacity=\"0.6\"/>\r\n            </GeocoderFilter>\r\n            <FilterDropdown title=\"Road Name\" id=\"road_name\" options={getCPOptions( \"road_name\" )} filters={display.filters} setDisplay={setDisplay}>\r\n                <line x1=\"-20\" x2=\"-20\" y1=\"35\" y2=\"15\" strokeWidth=\"5\"/>\r\n                <line x1=\"20\" x2=\"20\" y1=\"35\" y2=\"15\" strokeWidth=\"5\"/>\r\n                <rect x=\"-40\" y=\"-35\" width=\"80\" height=\"50\"/>\r\n                <text x=\"0\" y=\"2\">A66</text>\r\n            </FilterDropdown>\r\n            <FilterDropdown title=\"Road Type\" id=\"road_type\" options={getCPOptions( \"road_type\" )} filters={display.filters} setDisplay={setDisplay}>\r\n                <path d=\"M -10 -40 h 7 l -1 20 h -8 Z\"/>\r\n                <path d=\"M 10 -40 h -7 l 1 20 h 8 Z\"/>\r\n                <path d=\"M -13 0 h 9 l -2 40 h -11 Z\"/>\r\n                <path d=\"M 13 0 h -9 l 2 40 h 11 Z\"/>\r\n                <path d=\"M -40 -15 h 80 v 10 h -7 q -3 0 -3 3 v 7 h -7 l -3 -7 q 0 -3 -3 -3 h -34 q -3 0 -3 3 l -3 7 h -7 v -7 q 0 -3 -3 -3 h -7 v -10\"/>\r\n            </FilterDropdown>\r\n        </FilterHolder>\r\n    )\r\n\r\n}\r\n\r\nexport const CountFilters = ({showDate = true, showDirection = true, data, display, setDisplay}) => {\r\n\r\n    const date = useCallback(\r\n        <FilterDropdown title=\"Year\" id=\"year\" options={Array.from( {length:19}, ( v, i ) => (2000 + i).toString() )} filters={display.filters} setDisplay={setDisplay}>\r\n            <path d={`M -30 -30 q -10 0 -10 10 v 50 q 0 10 10 10 h 60 q 10 0 10 -10 v -50 q 0 -10 -10 -10 h -5 a 10 10 0 0 0 -20 0 h -10 a 10 10 0 0 0 -20 0 h -5\r\n                      M -29 -14 h  13 v  12 h -13 v -12\r\n                      M -14 -14 h  13 v  12 h -13 v -12\r\n                      M  1  -14 h  13 v  12 h -13 v -12\r\n                      M  16 -14 h  13 v  12 h -13 v -12\r\n                      M -29  2  h  13 v  12 h -13 v -12\r\n                      M -14  2  h  13 v  12 h -13 v -12\r\n                      M  1   2  h  13 v  12 h -13 v -12\r\n                      M  16  2  h  13 v  12 h -13 v -12\r\n                      M -29  18 h  13 v  12 h -13 v -12\r\n                      M -14  18 h  13 v  12 h -13 v -12`\r\n                  }/>\r\n        </FilterDropdown>\r\n        , [ display.filters, setDisplay ] );\r\n\r\n    const direction = useCallback(\r\n        <FilterDropdown title=\"Direction\" id=\"direction\" options={[\"N\",\"S\",\"E\",\"W\"]} filters={display.filters} setDisplay={setDisplay}>\r\n            <path d={`M -45 0 a 45 45 0 0 0 90 0 a 45 45 0 0 0 -90 0 M 35 0 a 35 35 0 0 1 -70 0 a 35 35 0 0 1 70 0`}/>\r\n            <path d={`M 0 34 l -10 -32 a 20 20 0 0 0 20 0 l -10 32`} transform=\"rotate(20)\"/>\r\n            <path d={`M 0 34 l -10 -32 a 20 20 0 0 0 20 0 l -10 32`} transform=\"rotate(200)\"/>\r\n        </FilterDropdown>\r\n        , [ display.filters, setDisplay ] );\r\n\r\n    return (\r\n        <FilterHolder id=\"countFilters\">\r\n            { showDate ?\r\n                date\r\n            : null }\r\n            { showDirection ?\r\n                direction\r\n            : null }\r\n        </FilterHolder>\r\n    )\r\n\r\n}\r\n\r\nconst FilterDropdown = ({ children: icon, title, id, options, filters, setDisplay }) => {\r\n\r\n    let active = filters.hasOwnProperty( id );\r\n    const setVal = val => {\r\n        if( active ){\r\n            setDisplay( { type: `addFilter`, payload: [ id, val ] } );\r\n        }else {\r\n            setDisplay( { type: `removeFilter`, payload: id } );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`component-filterDropdown${ active ? \" active\" : \"\"}`}>\r\n            <div className=\"header\" onClick={() => { active = !active; setVal( options[0] ) }}>\r\n                <svg viewBox=\"0 0 100 100\">\r\n                    <g style={{transform: \"translate(50%,50%)\"}}>\r\n                        {icon}\r\n                    </g>\r\n                </svg>\r\n            </div>\r\n            <select onChange={ev => setVal( ev.target.value )} value={filters[id]||\"\"}>\r\n                {options.map( option => <option key={option} value={option}>{option}</option> )}\r\n            </select>\r\n            <div className=\"header_text\" onClick={() => { active = !active; setVal( options[0] ) }}>\r\n                <h1 className=\"title\">{title}</h1>\r\n                <h1 className=\"currentFilter\">{filters[id]}</h1>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nconst GeocoderFilter = ({children: icon, map, filters, setDisplay}) => {\r\n\r\n        let active = filters.hasOwnProperty( \"distance\" );\r\n        const searchBox = useRef( null );\r\n        const radiusRef = useRef( null );\r\n        const geoCoder = useGeocoder( map, searchBox, 'pk.eyJ1IjoianJpZGxleTI0NiIsImEiOiJjanhpMzYxdXcxbWliNDFsN2g2bGg3ODg2In0.qqSDB24vCq0mdKUCdY4zgw', setDisplay, radiusRef );\r\n\r\n        const setVal = val => {\r\n            if( active ){\r\n                setDisplay( { type: `addFilter`, payload: [ \"distance\", filters.distance ? { ...filters.distance, radius: val } : null ] } );\r\n            }else {\r\n                geoCoder.clear()\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className={`component-geoCoder${ active ? \" active\" : \"\"}`}>\r\n                <div className=\"header\" onClick={() => { active = !active; setVal( 5 ) }}>\r\n                    <svg viewBox=\"0 0 100 100\">\r\n                        <g style={{transform: \"translate(50%,50%)\"}}>\r\n                            {icon}\r\n                        </g>\r\n                    </svg>\r\n                </div>\r\n                <div className=\"geoCoder\" ref={searchBox}>\r\n                    <select ref={radiusRef} onChange={ev => setVal( ev.target.value )} value={filters.distance ? filters.distance.radius : \"5\"}>\r\n                        <option value=\"5\">&lt;5km</option>\r\n                        <option value=\"10\">&lt;10km</option>\r\n                        <option value=\"15\">&lt;15km</option>\r\n                    </select>\r\n                </div>\r\n                <div className=\"header_text\" onClick={() => { active = !active; setVal( 5 ) }}>\r\n                    <h1 className=\"title\">Distance</h1>\r\n                    <h1 className=\"currentFilter\">{filters.distance ? filters.distance.text : \"\"}</h1>\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n}\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useMapbox, useMap } from '../../logic/Hooks.js';\r\nimport { CPFilters } from './DataControls.js';\r\nimport '../css/Mapbox.scss';\r\n\r\nconst Mapbox = ({ children, data, filteredData, display, setDisplay }) => {\r\n\r\n    const [ mapMarkers, setMapMarkers ] = useState( null );\r\n    const map = useRef( null );\r\n\r\n    const Map = useMapbox({\r\n        accessToken: 'pk.eyJ1IjoianJpZGxleTI0NiIsImEiOiJjanhpMzYxdXcxbWliNDFsN2g2bGg3ODg2In0.qqSDB24vCq0mdKUCdY4zgw',\r\n        mapRef: map,\r\n    } );\r\n\r\n    useMap( Map, mapMarkers, display, setDisplay );\r\n\r\n    useEffect( () => {\r\n\r\n        if( !filteredData ) return;\r\n        setMapMarkers( filteredData )\r\n\r\n    }, [filteredData, display.filters])\r\n\r\n    return (\r\n        <div className=\"Mapbox\" ref={map}>\r\n            <CPFilters data={data} map={Map} display={display} setDisplay={setDisplay}/>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Mapbox\r\n","import * as d3 from 'd3';\r\n\r\n//Animations\r\nconst t_fadeIn = selection => {\r\n    selection\r\n        .transition( \"fade\" )\r\n        .duration( 50 )\r\n        .attr( \"opacity\", 1 )\r\n}\r\nconst t_fadeOut = selection => {\r\n    selection\r\n        .transition( \"fade\" )\r\n        .duration( 100 )\r\n        .attr( \"opacity\", 0.2 )\r\n}\r\n\r\n//Mouse Event handlers\r\nconst onMouseMove = function( d ){\r\n\r\n    d3.selectAll( `.Graph .Data > *:not([class=\"${d.key}\"])` ).call( t_fadeOut );\r\n    d3.selectAll( `.Graph .Legend > g:not([id=\"${d.key}\"])` ).call( t_fadeOut );\r\n\r\n}\r\nconst onMouseOut = function(){\r\n\r\n    d3.selectAll( \".Graph .Data > *, .Graph .Legend > g\" ).call( t_fadeIn );\r\n\r\n}\r\n\r\nconst triggerEvent = ( d, event ) => {\r\n    d3.select( `[class=\"${d.label}\"]` )\r\n        .each( function( d, i ){\r\n            d3.select( this ).on( event ).apply( this, [d, i] )\r\n        })\r\n}\r\n\r\nconst colours = [\"#527243\", \"#E6BD40\", \"#4B8783\", \"#CF8576\", \"#C1C4E3\", \"#A078F4\"];\r\n\r\nexport const drawLegend = ( frame, { title, seriesLabels } ) => {\r\n    //Draws linked legend with input event handlers\r\n    //Animations\r\n    const t_slideIn = function( selection ){\r\n\r\n        selection\r\n            .attr( \"x\", 100 )\r\n            .attr( \"opacity\", 0 )\r\n            .transition( \"fade\" )\r\n            .duration( 200 )\r\n            .attr( \"x\", 0 )\r\n            .attr( \"opacity\", 1 )\r\n\r\n    }\r\n\r\n    //Event Handlers\r\n    const onMouseMove = d => triggerEvent( d, \"mousemove\" );\r\n    const onMouseOut = d => triggerEvent( d, \"mouseout\" );\r\n    const onClick = d => triggerEvent( d, \"click\" );\r\n    const onContext = d => triggerEvent( d, \"contextmenu\" );\r\n\r\n    //Enter, update, exit\r\n    frame.selectAll( \"g\" ).data( seriesLabels, d => d.label ).join(\r\n        enter => {\r\n\r\n            const grp = enter.append( \"g\" )\r\n                .attr( \"class\", \"legend_entry\" )\r\n                .attr( \"id\", d => d.label )\r\n                .attr( \"transform\", ( d, i ) => `translate( 0, ${i*25} )` )\r\n                .on( \"mousemove\", onMouseMove )\r\n                .on( \"mouseout\", onMouseOut )\r\n                .on( \"click\", onClick )\r\n                .on( \"contextmenu\", onContext )\r\n\r\n            grp.append( \"circle\" )\r\n                .attr( \"cx\", \"-12\" )\r\n                .attr( \"cy\", -6 )\r\n                .attr( \"r\", 10 )\r\n                .attr( \"fill\", d => d.colour )\r\n                .call( t_slideIn )\r\n\r\n            grp.append( \"text\" )\r\n                .text( d => d.label )\r\n                .attr( \"fill\", d => d.colour )\r\n                .call( t_slideIn )\r\n\r\n        }\r\n    )\r\n\r\n}\r\n\r\nexport const drawAxes = ( frame, x, y, hoverable, setDisplay ) => {\r\n    //Draws axes on graph, smooth transitions\r\n\r\n    y && frame.select( \".LeftAxis\" )\r\n        .transition()\r\n        .call( d3.axisLeft( y ).tickSize( -600 ) )\r\n\r\n    x && frame.select( \".BottomAxis\" )\r\n        .transition()\r\n        .call( d3.axisBottom( x ).tickPadding([0]).tickSizeOuter([0]).tickFormat( d3.format( \"d\" ) ) )\r\n\r\n    frame.select( \".BottomAxis\" )\r\n        .selectAll( \"text\" )\r\n        .attr( \"y\", 0 )\r\n        .attr( \"dx\", -9 )\r\n        .on( \"mouseover\", ( d, i ) => hoverable && setDisplay( { type: 'setHoveredCP', payload: x.domain()[i] } ) )\r\n        .on( \"mouseout\", ( d, i ) => hoverable && setDisplay( 'clearHoveredCP' ) )\r\n\r\n    frame.select( \".BottomAxis\" )\r\n        .selectAll( \".tick > text\" )\r\n        .attr( \"transform\", \"rotate(-45)\" )\r\n\r\n\r\n}\r\n\r\nexport const calculateStacks = ( data, offset = d3.stackOffsetNone ) => {\r\n    //Calculates stacks based on data descendants, return array of subgroup names, stack data for plotting, and colour function\r\n    let subgroups, stack, colour;\r\n\r\n    if( data.length === 0 ){\r\n        return {\r\n            stackedData: [],\r\n            subgroups: [],\r\n            colour: () => {}\r\n        }\r\n    }\r\n\r\n    if( data[0].children ){\r\n\r\n        subgroups = data[0].children.map( child => child.data.name );\r\n\r\n        stack = d3.stack()\r\n            .keys( subgroups )\r\n            .offset( offset )\r\n            .value( ( d, key ) => d.children.find( child => child.data.name === key ).data.total )\r\n\r\n    } else{\r\n\r\n        subgroups = [data[0].data.name];\r\n\r\n        stack = d3.stack()\r\n            .keys( subgroups )\r\n            .offset( offset )\r\n            .value( ( d, key ) => d.data.total )\r\n\r\n    }\r\n    colour = d3.scaleOrdinal()\r\n        .domain( subgroups )\r\n        .range( colours )\r\n\r\n    return { stackedData: stack( data ), subgroups: subgroups, colour: colour }\r\n\r\n}\r\n\r\nexport const drawStackedBars = ( graph, bounds, [ route, title ] , setDisplay, { barLabels, graphData, lastIndex } ) => {\r\n\r\n    //Navigation functions\r\n    const drillDown = d => {\r\n\r\n        d[0].data.children && setDisplay( { type: 'setView', payload: [\"descent\", d.key] } );\r\n\r\n    }\r\n    const goUp = d => {\r\n\r\n        d3.event.preventDefault();\r\n        graphData[0].parent && setDisplay( { type: 'setView', payload: [\"ascent\", graphData[0].parent.data.name] } );\r\n\r\n    }\r\n\r\n    graph.select( \".BG\" ).on( \"contextmenu click\", goUp );\r\n\r\n    const { stackedData, subgroups, colour } = calculateStacks( graphData );\r\n    const max = Math.max( ...graphData.map( datum => datum.data.total ) );\r\n\r\n    //Scales\r\n    const x = d3.scaleBand()\r\n        .domain( barLabels )\r\n        .range( [ bounds.left, bounds.width+bounds.left ] )\r\n        .padding( [0.2] )\r\n\r\n    const y = d3.scaleLinear()\r\n        .domain( [ 0, max ] )\r\n        .range( [ bounds.height+bounds.top, bounds.top ] )\r\n        .nice()\r\n\r\n    //If descending, initial [y0, y1] of parent rects for transition\r\n    const parentBounds = [];\r\n\r\n    //--------------------\r\n    //Stacks\r\n\r\n    //Add new stack groups\r\n    graph.select( \".Data\" ).selectAll( \"g\" ).data( stackedData, d => d.key )\r\n        .join(\r\n            enter => {\r\n\r\n                const newGs = enter.append( \"g\" )\r\n                    .attr( \"class\", d => d.key )\r\n                    .attr( \"fill\", d => colour( d.key ) )\r\n\r\n                return newGs\r\n\r\n            },\r\n            update => update,\r\n            exit => {\r\n\r\n                if( route === \"descent\" ){\r\n                    //If drilling down, parent group is replaced, so need to store dimensions before removal\r\n                    exit\r\n                        .filter( ( d, i ) => i === lastIndex )\r\n                        .selectAll( \"rect\" )\r\n                        .each( function(){ parentBounds.push( [ +d3.select( this ).attr( \"y\" ), +d3.select( this ).attr( \"height\" ) ] ) } )\r\n\r\n                }\r\n\r\n                exit.remove()\r\n\r\n            }\r\n        )\r\n        .on( \"mousemove\", onMouseMove )\r\n        .on( \"mouseout\", onMouseOut )\r\n        .on( \"click\", drillDown )\r\n        .on( \"contextmenu\", goUp )\r\n        //NEW RECTS\r\n        .selectAll( \"rect\" ).data( d => d )\r\n            .join(\r\n                enter => {\r\n\r\n                    enter = enter.append( \"rect\" );\r\n\r\n                    //Use stored parent rect dimensions for smooth transition in descendant rects\r\n                    if( route === \"descent\" && parentBounds[0] ){\r\n\r\n                        enter\r\n                            .each( function( d, i ){\r\n\r\n                                const tmpmax = Math.max( ...stackedData.map( series => series[i][1] ) );\r\n\r\n                                const tmp_y = d3.scaleLinear()\r\n                                    .domain( [ 0, tmpmax ] )\r\n                                    .range( [ parentBounds[i][0] + parentBounds[i][1], parentBounds[i][0] ] )\r\n\r\n                                d3.select( this )\r\n                                    .attr( \"y\", tmp_y( d[1] ) )\r\n                                    .attr( \"height\", tmp_y( d[0] ) - tmp_y( d[1] ) )\r\n\r\n                            })\r\n\r\n                    } else {\r\n\r\n                        enter\r\n                            .attr( \"y\", d => y( d[1] ) )\r\n                            .attr( \"height\", 0 )\r\n\r\n                    }\r\n\r\n                    return enter\r\n\r\n                }\r\n            )\r\n            .attr( \"class\", ( d, i ) => d.data.data.CP.id )\r\n            .attr( \"x\", ( d, i ) => x( barLabels[i] ) )\r\n            .attr( \"width\", x.bandwidth() )\r\n            .transition( \"rectUpdate\" )\r\n            .duration( 500 )\r\n            .attr( \"y\", d => y( d[1] ) )\r\n            .attr( \"height\", d => y( d[0] ) - y( d[1] ) )\r\n\r\n\r\n    //Update legend\r\n    drawLegend( graph.select( \".Legend\" ), {\r\n        title: title,\r\n        seriesLabels: subgroups.map( ( group, i ) => ({ label: group, colour: colour( group ) }) ).reverse()\r\n    })\r\n\r\n    //Update Axes\r\n    drawAxes( graph.select( \".Axes\" ), x, y, true, setDisplay );\r\n\r\n}\r\n\r\nexport const drawAreaStacks = ( graph, bounds, [ route, title ] , setDisplay, { xLabels, graphData, lastIndex } ) => {\r\n\r\n    //Navigation functions\r\n    const drillDown = d => {\r\n\r\n        d[0].data.children && setDisplay( { type: 'setView', payload: [\"descent\", d.key] } );\r\n\r\n    }\r\n    const goUp = d => {\r\n\r\n        d3.event.preventDefault();\r\n        graphData[0].parent && setDisplay( { type: 'setView', payload: [\"ascent\", graphData[0].parent.data.name] } );\r\n\r\n    }\r\n\r\n    graph.select( \".BG\" ).on( \"contextmenu click\", goUp );\r\n\r\n    const { stackedData, subgroups, colour } = calculateStacks( graphData );\r\n    const max = Math.max( ...graphData.map( datum => datum.data.total ) );\r\n\r\n    //Scales\r\n    const x = d3.scaleLinear()\r\n        .domain( [2000, 2018] )\r\n        .range( [bounds.left, bounds.width+bounds.left] )\r\n\r\n    x.clamp( true );\r\n\r\n    const y = d3.scaleLinear()\r\n        .domain( [0, max] )\r\n        .nice()\r\n        .range( [bounds.height+bounds.top, bounds.top] )\r\n\r\n    //Cursor\r\n    graph.on( \"mousemove.cursor\", function(){\r\n\r\n        const x0 = Math.round( x.invert( d3.mouse(this)[0] ) );\r\n        const data = graphData[0].children ? graphData[x0-2000].children.map( child => child.data.total ) : [graphData[x0-2000].data.total] ;\r\n\r\n        graph.select( \".Cursor > line\" )\r\n            .attr( \"x1\", x( x0 ) )\r\n            .attr( \"x2\", x( x0 ) )\r\n\r\n        graph.select( \".Cursor_title\" ).text( x0 );\r\n\r\n        graph.select( \".Cursor > g\" ).selectAll( \"text\" ).data( subgroups )\r\n            .join( \"text\" )\r\n            .attr( \"y\", ( d, i ) => i*25 )\r\n            .text( ( d, i ) => d + \": \" + data[i] )\r\n\r\n    });\r\n\r\n    //Draw areas\r\n    graph.select( \".Data\" ).selectAll( \"path\" )\r\n        .data( stackedData, d => d.key )\r\n        .join(\r\n            enter => {\r\n                const newAreas = enter.append( \"path\" )\r\n                    .attr( \"class\", d => d.key )\r\n                    .style( \"fill\", d => colour( d.key ) )\r\n\r\n                return newAreas\r\n            }\r\n        )\r\n        .on( \"mousemove\", onMouseMove )\r\n        .on( \"mouseout\", onMouseOut )\r\n        .on( \"click\", drillDown )\r\n        .on( \"contextmenu\", goUp )\r\n        .transition()\r\n        .duration( 500 )\r\n        .attr( \"d\",\r\n            d3.area()\r\n                .curve( d3.curveMonotoneX )\r\n                .x( ( d, i ) => x( xLabels[i] ) )\r\n                .y0( d => y( d[0] ) )\r\n                .y1( d => y( d[1] ) )\r\n        )\r\n\r\n\r\n    drawAxes( graph.select( \".Axes\" ), x, y );\r\n\r\n    drawLegend( graph.select( \".Legend\" ), { title: \"\", seriesLabels: subgroups.map( ( group, i ) => ({ label: group, colour: colour( group ) }) ).reverse() } );\r\n\r\n}\r\n","import React, { useEffect, useState, useRef, useMemo } from 'react';\r\nimport { filterCounts } from '../../logic/DataLogic.js';\r\nimport { drawStackedBars } from '../../logic/GraphLogic.js';\r\nimport * as d3 from 'd3';\r\nimport '../css/Graphs.scss';\r\n\r\nexport default function HierarchicalGraph({ children, data, display, setDisplay }){\r\n\r\n    const frame = useRef( null );\r\n    const [ overloadWarn, setOverloadWarn ] = useState( false );\r\n    const bounds = useMemo( () => ({\r\n        top: 20,\r\n        left: 110,\r\n        height: 360,\r\n        width: 590\r\n    }), []);\r\n\r\n    useEffect( () => {\r\n\r\n        if( !data ) return;\r\n\r\n        const graph = d3.select( frame.current );\r\n\r\n        setOverloadWarn( data.length > 25 );\r\n        if( data.length > 25 ){\r\n\r\n            graph.selectAll( \".StackedBar > .Data > g\" ).remove();\r\n            return;\r\n        }\r\n\r\n        drawStackedBars( graph, bounds, display.view, setDisplay,\r\n            data.reduce( ( acc, CP ) => {\r\n\r\n                const graphNode = filterCounts( CP, display.filters ).hierarchy.descendants().find( descendant => descendant.data.name === display.view[1] );\r\n\r\n                acc.barLabels.push( CP.id );\r\n                acc.graphData.push( graphNode );\r\n                acc.lastIndex = acc.lastIndex === undefined ? ( graphNode.parent ? graphNode.parent.children.indexOf( graphNode ) : 0 ) : acc.lastIndex;\r\n\r\n                return acc\r\n\r\n            }, { barLabels: [], graphData: [], lastIndex: undefined })\r\n        )\r\n\r\n\r\n    }, [data, display.filters, display.view, bounds, setDisplay])\r\n\r\n    return (\r\n        <div className=\"Graph HierarchicalGraph\">\r\n            <div className={`OverloadWarning${overloadWarn ? \" overload\" : \"\"}`}>\r\n                <p>\r\n                    Phew, that's a lot of data...{data ? data.length : 0} Count Points to be exact!\r\n                    <br/>\r\n                    Try applying more filters\r\n                </p>\r\n            </div>\r\n            {children}\r\n            <svg className=\"StackedBar\" viewBox=\"0 0 900 500\" preserveAspectRatio=\"xMidYMid\" ref={frame}>\r\n                <rect className=\"BG\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"#0000\"/>\r\n                <text className=\"Title\" transform={`translate(${bounds.left+bounds.width/2})`}>Filtered Count Points Overview</text>\r\n                <g className=\"Legend\" transform={`translate( ${bounds.left+bounds.width + 40}, 100 )`}/>\r\n                <g className=\"Axes\">\r\n                    <text transform={`translate(25,${bounds.top+bounds.height/2})rotate(-90)`}>Total Vehicles</text>\r\n                    <text transform={`translate(${bounds.left+bounds.width/2},${bounds.top+bounds.height+80})`}>Count Point ID</text>\r\n                    <g className=\"LeftAxis\" transform={`translate( ${bounds.left}, 0 )`}/>\r\n                    <g className=\"BottomAxis\" transform={`translate( 0, ${bounds.height+bounds.top} )`}/>\r\n                </g>\r\n                <g className=\"Data\"/>\r\n            </svg>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useMemo } from 'react';\r\nimport { VehicleCounts, filterCounts } from '../../logic/DataLogic.js';\r\nimport { drawAreaStacks } from '../../logic/GraphLogic.js';\r\nimport * as d3 from 'd3';\r\nimport '../css/Graphs.scss';\r\n\r\nexport default function AreaGraph({ children, data, display, setDisplay }){\r\n\r\n    const frame = useRef( null );\r\n    const bounds = useMemo( () => ({\r\n        top: 20,\r\n        left: 110,\r\n        width: 590,\r\n        height: 360\r\n    }), [] );\r\n\r\n    useEffect( () => {\r\n\r\n        if( !data ) return;\r\n\r\n        const graph = d3.select( frame.current );\r\n\r\n        const years = Array.from( {length:19}, ( v, i ) => 2000 + i );\r\n        const sumData = years.map( year => {\r\n            return data.reduce( ( acc, CP ) => acc.addCounts( \"Total\", filterCounts( CP, { year: year.toString(), direction: display.filters.direction } ).getCounts() ), new VehicleCounts() )\r\n                .hierarchy\r\n                .descendants().find( descendant => descendant.data.name === display.view[1] )\r\n        });\r\n\r\n        drawAreaStacks( graph, bounds, display.view, setDisplay, {\r\n            xLabels: years,\r\n            graphData: sumData,\r\n            lastIndex: sumData.parent ? sumData.parent.children.indexOf( sumData ) : 0,\r\n        })\r\n\r\n\r\n    }, [data, display.filters.direction, display.view, bounds, setDisplay])\r\n\r\n    return (\r\n        <div className=\"Graph AreaGraph\">\r\n            {children}\r\n            <svg className=\"StackedArea\" viewBox=\"0 0 900 500\" preserveAspectRatio=\"xMidYMid\" ref={frame}>\r\n                <rect className=\"BG\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"#0000\"/>\r\n                <text className=\"Title\" transform={`translate(${bounds.left+bounds.width/2})`}>Filtered Count Points over Time</text>\r\n                <g className=\"Legend\" transform={`translate( ${bounds.left+bounds.width + 40}, 100 )`}/>\r\n                <g className=\"Axes\">\r\n                    <text transform={`translate(22,${bounds.top+bounds.height/2})rotate(-90)`}>Total Vehicles</text>\r\n                    <text transform={`translate(${bounds.left+bounds.width/2},${bounds.top+bounds.height+80})`}>Year</text>\r\n                    <g className=\"LeftAxis\" transform={`translate( ${bounds.left}, 0 )`}/>\r\n                    <g className=\"BottomAxis\" transform={`translate( 0, ${bounds.height+bounds.top} )`}/>\r\n                </g>\r\n                <g className=\"Data\"/>\r\n                <g className=\"Cursor\">\r\n                    <line x1={bounds.left} x2={bounds.left} y1={bounds.top} y2={bounds.top+bounds.height}/>\r\n                    <text className=\"Cursor_title\" transform={`translate( ${bounds.left+bounds.width + 20}, 275 )`}/>\r\n                    <g transform={`translate( ${bounds.left+bounds.width + 20}, 300 )`}/>\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useCallback, useRef } from 'react';\r\nimport { Spring } from 'react-spring/renderprops';\r\nimport { useGesture } from 'react-use-gesture';\r\nimport * as d3 from 'd3';\r\nimport '../css/AppFrames.scss';\r\n\r\nexport const AppSidebar = ({children}) => {\r\n    return(\r\n        <div className=\"component-AppSidebar\">\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const AppFrame = ({ children, helpText }) => {\r\n\r\n    const [ maximised, setMaximised ] = useState( false );\r\n    const [ showHelp, setShowHelp ] = useState( false );\r\n\r\n    return (\r\n        <div className={`component-AppFrame${maximised ? ' fullscreen' : ''}`}>\r\n            <div id=\"layoutPlaceholder\" style={{width: \"100%\", height: \"100%\"}}/>\r\n            <div className=\"App_frame_children\">\r\n                {children}\r\n            </div>\r\n            <div className={`Help${showHelp ? \" visible\" : \"\"}`}>\r\n                <p>{helpText}</p>\r\n            </div>\r\n            <MaximiseButton maximised={maximised} setMaximised={setMaximised}/>\r\n            <HelpButton showHelp={showHelp} setShowHelp={setShowHelp}/>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nconst MaximiseButton = ({ maximised, setMaximised }) => {\r\n\r\n    const [ blend, setBlend ] = useState( 0 );\r\n    const path = useRef( null );\r\n\r\n    const bind = useGesture( {\r\n        onHover: ({hovering}) => { setBlend( hovering ? 1 : 0 ) },\r\n        onDragStart: () => setMaximised( !maximised )\r\n    })\r\n\r\n    const pathInterp = useCallback(\r\n        d3.interpolateString(\r\n            `M -10 0 L 0 0 L 0 10 M 0 10 L 0 0 L 10 0 M 10 0 L 0 0 L 0 -10 M 0 -10 L 0 0 L -10 0`,\r\n            `M -10 2 L -10 10 L -2 10 M 2 10 L 10 10 L 10 2 M 10 -2 L 10 -10 L 2 -10 M -2 -10 L -10 -10 L -10 -2`\r\n        ), [] );\r\n\r\n    return (\r\n        <div className=\"Maximise_Button\">\r\n            <svg viewBox=\"0 0 30 30\">\r\n                <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" {...bind()}/>\r\n                <Spring from={{ t: blend === 0 ? 1 : 0 }} to={{ t: blend }} config={{ tension: 360, friction: 24 }}>\r\n                    {({ t }) => <path ref={path} d={pathInterp( t )} transform=\"translate(15,15)\"/>}\r\n                </Spring>\r\n            </svg>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nconst HelpButton = ({ showHelp, setShowHelp }) => {\r\n\r\n    const [ blend, setBlend ] = useState( 0 );\r\n    const path = useRef( null );\r\n\r\n    const bind = useGesture( {\r\n        onHover: ({hovering}) => { setBlend( hovering ? 1 : 0 ); setShowHelp( hovering ) },\r\n    })\r\n\r\n    const pathInterp = useCallback(\r\n        d3.interpolateString(\r\n            `M -5 -10 c 17 -2 17 4 5 10 c 0 0 0 0 0 7 M -1 11 h 2`,\r\n            `M -2 4 c -20 -21 24 -21 4 0 c 0 8 -4 8 -4 0 M -2 4 h 4`\r\n        ), [] );\r\n\r\n    return (\r\n        <div className=\"Help_Button\">\r\n            <svg viewBox=\"0 0 30 30\">\r\n                <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" {...bind()}/>\r\n                <Spring from={{ t: blend === 0 ? 1 : 0 }} to={{ t: blend }} config={{ tension: 360, friction: 24 }}>\r\n                    {({ t }) => <path ref={path} d={pathInterp( t )} transform=\"translate(15,15)\"/>}\r\n                </Spring>\r\n            </svg>\r\n        </div>\r\n    )\r\n\r\n}\r\n","import React, { useRef, useEffect } from 'react';\r\nimport { useSpring, animated } from 'react-spring';\r\nimport * as d3 from 'd3';\r\nimport '../css/LoadScreen.scss';\r\n\r\nexport const LoadScreen = ({loading}) => {\r\n\r\n    const props = useSpring( { from: { opacity: loading ? 0 : 1 }, opacity: loading ? 1 : 0, delay: 1000 } );\r\n    const carRef = useRef( null );\r\n\r\n    useEffect( () => {\r\n\r\n        if( !carRef.current ) return;\r\n\r\n        const car = d3.select( carRef.current );\r\n\r\n        (function wheelRotation(){\r\n\r\n            if( props.opacity.value === 0 ) return;\r\n\r\n            car.selectAll( \"#load_car_wheel\" )\r\n                .attr( \"transform\", \"rotate(0)\" )\r\n                .transition()\r\n                .duration( 500 )\r\n                .ease( d3.easeLinear )\r\n                .attr( \"transform\", \"rotate(180)\" )\r\n                .on( \"end\", wheelRotation )\r\n\r\n        })();\r\n\r\n        (function carBob(){\r\n\r\n            if( props.opacity.value === 0 ) return;\r\n\r\n            car.selectAll( \"#load_car\" )\r\n                .attr( \"transform\", \"translate( 160, 195 )\" )\r\n                .transition()\r\n                .attr( \"transform\", \"translate( 160, 193 )\" )\r\n                .on( \"end\", carBob )\r\n\r\n        })();\r\n\r\n        (function smoke(){\r\n\r\n            if( props.opacity.value === 0 ) return;\r\n\r\n            car.selectAll( \"#load_car\" )\r\n                .transition( \"smokeLoop\" )\r\n                .duration( 200 )\r\n                .on( \"end\", smoke )\r\n\r\n            car.selectAll( \"#load_car\" )\r\n                .append( \"circle\" )\r\n                .attr( \"id\", \"load_car_smoke\" )\r\n                .attr( \"cx\", 10 )\r\n                .attr( \"cy\", 0 )\r\n                .attr( \"r\", 5 )\r\n                .attr( \"opacity\", 1 )\r\n                .transition()\r\n                .duration( 1000 )\r\n                .attr( \"cx\", -50*Math.random() - 50 )\r\n                .attr( \"cy\", -30*Math.random() - 30 )\r\n                .attr( \"r\", 50 )\r\n                .attr( \"opacity\", 0 )\r\n                .remove()\r\n\r\n        })();\r\n\r\n        function bushSlide(){\r\n\r\n            if( props.opacity.value === 0 ) return;\r\n\r\n            d3.select( this )\r\n                .attr( \"transform\", \"translate(700, 210)\")\r\n                .transition()\r\n                .ease( d3.easeLinear )\r\n                .duration( 4000*Math.random() + 2000 )\r\n                .attr( \"transform\", \"translate(-100, 210)\")\r\n                .on( \"end\", () => bushSlide.bind( this )() )\r\n\r\n        }\r\n\r\n        car.selectAll( \"#load_bush > g\" )\r\n            .each( bushSlide )\r\n\r\n    });\r\n\r\n    return (\r\n        <animated.div className=\"loadScreen\" style={props}>\r\n            <svg viewBox=\"0 0 600 214\" ref={carRef}>\r\n                <g id=\"load_road\">\r\n                    <rect x=\"0\" y=\"210\" width=\"100%\" height=\"2%\"/>\r\n                    <g id=\"load_bush\">\r\n                        <g id=\"load_bush--1\" transform=\"translate(50,210)\">\r\n                            <path d=\"M 0 0 a 30 30 0 0 1 0 -50 a 30 30 0 0 1 45 -10 v 60 Z\" fill=\"#4CA134\"/>\r\n                            <path d=\"M 44 -60 a 30 30 0 0 1 30 15 a 30 30 0 0 1 10 45 h -40 Z\" fill=\"#77BC1F\"/>\r\n                        </g>\r\n                        <g id=\"load_bush--2\" transform=\"translate(400,210)\">\r\n                            <path d=\"M 0 0 a 40 40 0 0 1 20 -50 a 40 40 0 0 1 40 -30 v 80 Z\" fill=\"#7C8F29\"/>\r\n                            <path d=\"M 59 -80 a 40 40 0 0 1 30 50 a 40 40 0 0 1 10 30 h -39 Z\" fill=\"#9BB53F\"/>\r\n                        </g>\r\n                    </g>\r\n                    <g id=\"load_cloud\">\r\n                        <line id=\"load_cloud--1\" x1=\"200\" x2=\"400\" y1=\"30\" y2=\"30\"/>\r\n                        <line id=\"load_cloud--2\" x1=\"240\" x2=\"500\" y1=\"40\" y2=\"40\"/>\r\n                    </g>\r\n                </g>\r\n                <g id=\"load_car_wheels\" transform=\"translate(223,193)\">\r\n                    <g id=\"load_car_wheel\">\r\n                        <circle r=\"18\" id=\"load_car_wheel_outer\"/>\r\n                        <circle r=\"10\" id=\"load_car_wheel_inner\"/>\r\n                        <path d=\"M -10 0 h 20 M 0 -10 v 20\"/>\r\n                        <path d=\"M -8 0 h 16 M 0 -8 v 16\" transform=\"rotate(45)\"/>\r\n                    </g>\r\n                    <use href=\"#load_car_wheel\" transform=\"translate(144,0)\"/>\r\n                </g>\r\n                <g id=\"load_car\">\r\n                    <path\r\n                        d={\r\n                            `M10 -10\r\n                            q 5 -10 0 -27\r\n                            l 42 -3\r\n                            q 7 -1 5 -5 l -3 -17\r\n                            q 55 -10 105 -5\r\n                            q 3 0 17 25\r\n                            l 63 5\r\n                            q 5 5 0 20\r\n                            q 8 5 2 16\r\n                            h -13\r\n                            a 22 22 0 1 0 -42 10\r\n                            h -105\r\n                            a 20 20 0 1 0 -38 -6\r\n                            q -15 0 -20 -4\r\n                            Z`\r\n                        }\r\n                    />\r\n                    <g id=\"load_car_windows\">\r\n                        <path d=\"M 67 -52 q -3 -4 4 -6 q 20 -3 30 -4 q 6 0 5 8 v 8 q 0 6 -5 6 h -20 q -5 0 -12 -10 Z\" />\r\n                        <path d=\"M 120 -62.5 l 28 0 v 22 h -33 q -2 0 -4 -5 v -13 q 0 -4 5 -4 Z\"/>\r\n                        <path d=\"M 148 -62.5 q 4 0 6 4 l 8 11 q 5 6 -1 7 h -13\"/>\r\n                    </g>\r\n                    <path d=\"M 13 -19 q 20 -3 100 -5 q 100 -1 118 -2 l 8 -10\" fill=\"none\" stroke=\"silver\"/>\r\n                </g>\r\n\r\n            </svg>\r\n            <h1>Loading data...</h1>\r\n        </animated.div>\r\n    )\r\n\r\n}\r\n","export const displayReducer = ( state, action ) => {\r\n\r\n    const updateState = newState => ({ ...state, ...newState });\r\n\r\n    const { type, payload } = action instanceof Object ? action : { type: action };\r\n\r\n    switch( type ){\r\n        case 'setMulti':\r\n            return updateState( payload )\r\n        case 'addFilter':\r\n            return updateState( { filters: { ...state.filters, [payload[0]]: payload[1] } } )\r\n        case 'setFilter':\r\n            return updateState( { filters: payload } )\r\n        case 'setView':\r\n            return updateState( { view: payload } )\r\n        case 'removeFilter':\r\n            delete state.filters[payload];\r\n            return updateState( { filters: { ...state.filters } } )\r\n        case 'clearFilters':\r\n            return updateState( { filters: {} } )\r\n        case 'setHoveredCP':\r\n            return updateState( { hoveredCP: payload } )\r\n        case 'clearHoveredCP':\r\n            return updateState( { hoveredCP: null } )\r\n        default:\r\n            throw new Error( \"Display state: Action not recognised\" )\r\n    }\r\n\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React, { useState, useEffect, useReducer, useMemo, useCallback } from 'react';\r\nimport Mapbox from './components/js/Mapbox.js';\r\nimport HierarchicalGraph from './components/js/HierarchicalGraph.js';\r\nimport AreaGraph from './components/js/AreaGraph.js';\r\nimport { CountFilters } from './components/js/DataControls.js';\r\nimport { AppSidebar, AppFrame } from './components/js/AppFrame.js';\r\nimport { LoadScreen } from './components/js/LoadScreen.js';\r\nimport { filterData, parseData } from './logic/DataLogic.js';\r\nimport { displayReducer } from './logic/Reducers.js';\r\nimport { useHoveredCP } from './logic/Hooks.js';\r\nimport * as d3 from 'd3';\r\nimport './App.scss';\r\n\r\nexport default function App() {\r\n\r\n    const [ data, setData ] = useState( null );\r\n    const [ loading, setLoading ] = useState( false );\r\n    const [ display, setDisplay ] = useReducer( displayReducer, { filters: {} } );\r\n\r\n    useEffect( () => {\r\n\r\n        setLoading( true );\r\n        d3.csv( './devon.csv' )\r\n            .then( result => {\r\n\r\n                    const newData = parseData( result );\r\n                    setDisplay({\r\n                        type: 'setMulti',\r\n                        payload: {\r\n                            filters: {road_name:\"A30\", direction: \"E\"},\r\n                            view: [\"\",\"HGVs\"],\r\n                            hoveredCP: null,\r\n                        }\r\n                    })\r\n                    setData( newData );\r\n                    setLoading( false );\r\n\r\n                }\r\n            )\r\n\r\n\r\n    }, [] )\r\n\r\n    useHoveredCP( display.hoveredCP );\r\n\r\n    const filteredData = useMemo( () => data && filterData( data, display.filters ), [data, display.filters] );\r\n    const memoMap = useCallback( <Mapbox data={data} filteredData={filteredData} display={display} setDisplay={setDisplay}/>, [filteredData, data] );\r\n    const loadScreen = useCallback( <LoadScreen loading={loading}/>, [loading] );\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <header className=\"App_header\">\r\n                <h1>Devon Annual Average Daily Flows (AADFs)</h1>\r\n            </header>\r\n            <div className=\"page\">\r\n                {loadScreen}\r\n                {memoMap}\r\n                <AppSidebar>\r\n                    <AppFrame helpText=\"This is an overview of all the Count Points visible on the map. You can click any of the stacked elements or the legend keys to drill down into the data. Right click or just click an empty space to traverse back up again.\">\r\n                        <HierarchicalGraph data={filteredData} display={display} setDisplay={setDisplay}>\r\n                            <CountFilters data={data} display={display} setDisplay={setDisplay}/>\r\n                        </HierarchicalGraph>\r\n                    </AppFrame>\r\n                    <AppFrame helpText=\"This shows the evolution of vehicle counts over time, summed over all currently visible Count Points. Like the Overview, you can click elements to navigate in and out of the data. You can use the cursor to see the values for a specific year.\">\r\n                        <AreaGraph data={filteredData} display={display} setDisplay={setDisplay}>\r\n                            <CountFilters showDate={false} data={data} display={display} setDisplay={setDisplay}/>\r\n                        </AreaGraph>\r\n                    </AppFrame>\r\n                </AppSidebar>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"sourceRoot":""}